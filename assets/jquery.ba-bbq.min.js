/*!
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
!function($,window){var jq_param_fragment,jq_deparam,jq_deparam_fragment,jq_bbq_pushState,jq_bbq_getState,jq_elemUrlAttr,re_no_escape,aps=Array.prototype.slice,decode=decodeURIComponent,jq_param=$.param,jq_bbq=$.bbq=$.bbq||{},jq_event_special=$.event.special,re_trim_querystring=/^.*\?|#.*$/g,re_trim_fragment=/^.*\#/,elemUrlAttr_cache={};function is_string(arg){return"string"==typeof arg}function curry(func){var args=aps.call(arguments,1);return function(){return func.apply(this,args.concat(aps.call(arguments)))}}function jq_param_sub(is_fragment,get_func,url,params,merge_mode){var result,qs,matches,url_params,hash;return undefined!==params?(hash=(matches=url.match(is_fragment?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/))[3]||"",2===merge_mode&&is_string(params)?qs=params.replace(is_fragment?re_trim_fragment:re_trim_querystring,""):(url_params=jq_deparam(matches[2]),params=is_string(params)?jq_deparam[is_fragment?"fragment":"querystring"](params):params,qs=2===merge_mode?params:1===merge_mode?$.extend({},params,url_params):$.extend({},url_params,params),qs=jq_param(qs),is_fragment&&(qs=qs.replace(re_no_escape,decode))),result=matches[1]+(is_fragment?"#":qs||!matches[1]?"?":"")+qs+hash):result=get_func(undefined!==url?url:window.location.href),result}function jq_deparam_sub(is_fragment,url_or_params,coerce){return undefined===url_or_params||"boolean"==typeof url_or_params?(coerce=url_or_params,url_or_params=jq_param[is_fragment?"fragment":"querystring"]()):url_or_params=is_string(url_or_params)?url_or_params.replace(is_fragment?re_trim_fragment:re_trim_querystring,""):url_or_params,jq_deparam(url_or_params,coerce)}function jq_fn_sub(mode,force_attr,params,merge_mode){return is_string(params)||"object"==typeof params||(merge_mode=params,params=force_attr,force_attr=undefined),this.each((function(){var that=$(this),attr=force_attr||jq_elemUrlAttr()[(this.nodeName||"").toLowerCase()]||"",url=attr&&that.attr(attr)||"";that.attr(attr,jq_param[mode](url,params,merge_mode))}))}jq_param.querystring=curry(jq_param_sub,0,(function(url){return url.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")})),jq_param.fragment=jq_param_fragment=curry(jq_param_sub,1,(function(url){return url.replace(/^[^#]*#?(.*)$/,"$1")})),jq_param_fragment.noEscape=function(chars){chars=chars||"";var arr=$.map(chars.split(""),encodeURIComponent);re_no_escape=new RegExp(arr.join("|"),"g")},jq_param_fragment.noEscape(",/"),$.deparam=jq_deparam=function(params,coerce){var obj={},coerce_types={true:!0,false:!1,null:null};return $.each(params.replace(/\+/g," ").split("&"),(function(j,v){var val,param=v.split("="),key=decode(param[0]),cur=obj,i=0,keys=key.split("]["),keys_last=keys.length-1;if(/\[/.test(keys[0])&&/\]$/.test(keys[keys_last])?(keys[keys_last]=keys[keys_last].replace(/\]$/,""),keys_last=(keys=keys.shift().split("[").concat(keys)).length-1):keys_last=0,2===param.length)if(val=decode(param[1]),coerce&&(val=val&&!isNaN(val)?+val:"undefined"===val?undefined:undefined!==coerce_types[val]?coerce_types[val]:val),keys_last)for(;i<=keys_last;i++)cur=cur[key=""===keys[i]?cur.length:keys[i]]=i<keys_last?cur[key]||(keys[i+1]&&isNaN(keys[i+1])?{}:[]):val;else $.isArray(obj[key])?obj[key].push(val):undefined!==obj[key]?obj[key]=[obj[key],val]:obj[key]=val;else key&&(obj[key]=coerce?undefined:"")})),obj},jq_deparam.querystring=curry(jq_deparam_sub,0),jq_deparam.fragment=jq_deparam_fragment=curry(jq_deparam_sub,1),$.elemUrlAttr||($.elemUrlAttr=function(obj){return $.extend(elemUrlAttr_cache,obj)})({a:"href",base:"href",iframe:"src",img:"src",input:"src",form:"action",link:"href",script:"src"}),jq_elemUrlAttr=$.elemUrlAttr,$.fn.querystring=curry(jq_fn_sub,"querystring"),$.fn.fragment=curry(jq_fn_sub,"fragment"),jq_bbq.pushState=jq_bbq_pushState=function(params,merge_mode){is_string(params)&&/^#/.test(params)&&undefined===merge_mode&&(merge_mode=2);var has_args=undefined!==params,url=jq_param_fragment(window.location.href,has_args?params:{},has_args?merge_mode:2);window.location.href=url+(/#/.test(url)?"":"#")},jq_bbq.getState=jq_bbq_getState=function(key,coerce){return undefined===key||"boolean"==typeof key?jq_deparam_fragment(key):jq_deparam_fragment(coerce)[key]},jq_bbq.removeState=function(arr){var state={};undefined!==arr&&(state=jq_bbq_getState(),$.each($.isArray(arr)?arr:arguments,(function(i,v){delete state[v]}))),jq_bbq_pushState(state,2)},jq_event_special.hashchange=$.extend(jq_event_special.hashchange,{add:function(handleObj){var old_handler;function new_handler(e){var hash=e.fragment=jq_param_fragment();e.getState=function(key,coerce){return undefined===key||"boolean"==typeof key?jq_deparam(hash,key):jq_deparam(hash,coerce)[key]},old_handler.apply(this,arguments)}if($.isFunction(handleObj))return old_handler=handleObj,new_handler;old_handler=handleObj.handler,handleObj.handler=new_handler}})}(jQuery,this),
/*!
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
function($,window,undefined){var fake_onhashchange,timeout_id,iframe,set_history,get_history,self,jq_event_special=$.event.special,browser=$.browser,mode=document.documentMode,is_old_ie=browser.msie&&(void 0===mode||mode<8),supports_onhashchange="onhashchange"in window&&!is_old_ie;function get_fragment(url){return(url=url||window.location.href).replace(/^[^#]*#?(.*)$/,"$1")}$.hashchangeDelay=100,jq_event_special.hashchange=$.extend(jq_event_special.hashchange,{setup:function(){if(supports_onhashchange)return!1;$(fake_onhashchange.start)},teardown:function(){if(supports_onhashchange)return!1;$(fake_onhashchange.stop)}}),(self={}).start=function(){if(!timeout_id){var last_hash=get_fragment();set_history||(set_history=get_history=function(val){return val},is_old_ie&&(iframe=$('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,get_history=function(){return get_fragment(iframe.document.location.href)},(set_history=function(hash,history_hash){if(hash!==history_hash){var doc=iframe.document;doc.open().close(),doc.location.hash="#"+hash}})(get_fragment()))),function loopy(){var hash=get_fragment(),history_hash=get_history(last_hash);hash!==last_hash?(set_history(last_hash=hash,history_hash),$(window).trigger("hashchange")):history_hash!==last_hash&&(window.location.href=window.location.href.replace(/#.*/,"")+"#"+history_hash),timeout_id=setTimeout(loopy,$.hashchangeDelay)}()}},self.stop=function(){iframe||(timeout_id&&clearTimeout(timeout_id),timeout_id=0)},fake_onhashchange=self}(jQuery,this);