function uiFeaturesMenuSetup(floorIndex){var $menu=$("#mnuSettings");$menu.empty();var $divSwitches=$("#divMenuFeatureSwitches");$divSwitches.empty(),$dataViews.children().length>0&&($($dataViews.find("view")[floorIndex]).find("feature").each((function(){var $xmlNode=$(this),id=$xmlNode.attr("id"),displayname=$xmlNode.attr("displayname"),selected="1"===$xmlNode.attr("selected")?'checked="checked"':"",$input=$('<input type="checkbox" id="btnFeature_'+id+'" data-theme="e" '+selected+" />"),$label=$('<label id="lblFeature_'+id+'" for="btnFeature_'+id+'" title="Options">'+displayname+"</label>");$input.on("change",uiFeaturesMenuSelect),$menu.append($input),$menu.append($label),selected="1"===$xmlNode.attr("selected")?"selected":"",$input=$('<select id="selFeatureSwitch_'+id+'" data-role="slider" data-mini="true"><option value="off">Off</option><option value="on" '+selected+">On</option></select>"),$label=$('<label id="lblFeatureSwitch_'+id+'" for="selFeatureSwitch_'+id+'">'+displayname+"</label>"),$input.on("change",uiFeaturesMenuSelect),$divSwitches.append($input),$divSwitches.append($label)})),$menu.trigger("create"),$divSwitches.trigger("create"));var $btnSettings=$("#btnSettings");$menu.children().length<=0?$btnSettings.addClass("ui-disabled"):$btnSettings.removeClass("ui-disabled")}function uiFeaturesMenuSelect(e){var $el=$(this),checked=$el.is(":checked")||"on"===$el.val();featureShowHide($el.attr("id").split("_")[1],checked)}function featureShowHide(featureID,show){var featureSVGID=$dataViews.find("feature[id="+featureID+"]").attr("svgid");$dataViews.find("feature[svgid="+strEscapeDots(featureSVGID)+"]").attr("selected",show?1:0),svgPlanFeatureShowHide(featureID,show)}