var planPaperWidth,planPaperHeight,planPaperAspectRatio,planWidth,planHeight,planAspectRatio,ZOOM_MAX=600,ZOOM_MIN=50,ZOOM_DEFAULT=100,ZOOM_STEP_BTNS=25,ZOOM_STEP_SLIDER=5,planZoomCurrentPercent=ZOOM_DEFAULT;function planIsPointOnVisiblePlan(pageX,pageY){var $divStage=$("#divStage"),$divPlan=$("#divPlan"),stageMinX=$divStage.offset().left,planMinX=$divPlan.offset().left,dropMinX=stageMinX>planMinX?stageMinX:planMinX,stageMinY=$divStage.offset().top,planMinY=$divPlan.offset().top,dropMinY=stageMinY>planMinY?stageMinY:planMinY,stageMaxX=stageMinX+$divStage.width(),planMaxX=planMinX+$divPlan.width(),dropMaxX=stageMaxX<planMaxX?stageMaxX:planMaxX,stageMaxY=stageMinY+$divStage.height(),planMaxY=planMinY+$divPlan.height();return pageX>dropMinX&&pageX<dropMaxX&&pageY>dropMinY&&pageY<(stageMaxY<planMaxY?stageMaxY:planMaxY)}function planFlipH(){var $dropNode,shouldFlip="true"!==$dataInfo.attr("flippedh");svgPlanFlipH(shouldFlip),$dataInfo.attr("flippedh",shouldFlip),$dataViews.find("drop").each((function(){"true"===($dropNode=$(this)).attr("flippedh")?$dropNode.attr("flippedh","false"):$dropNode.attr("flippedh","true")})),viewImgsFlip(shouldFlip)}function planFlipV(){var $dropNode,shouldFlip="true"!==$dataInfo.attr("flippedv");svgPlanFlipV(shouldFlip),$dataInfo.attr("flippedv",shouldFlip),$dataViews.find("drop").each((function(){"true"===($dropNode=$(this)).attr("flippedv")?$dropNode.attr("flippedv","false"):$dropNode.attr("flippedv","true")}))}function planZoom(percent,finalize){"IN"===percent?percent=planZoomCurrentPercent+ZOOM_STEP_BTNS:"OUT"===percent&&(percent=planZoomCurrentPercent-ZOOM_STEP_BTNS),isNaN(percent)||(percent>ZOOM_MAX?percent=ZOOM_MAX:percent<ZOOM_MIN&&(percent=ZOOM_MIN)),svgPlanZoom(percent,finalize)}function planZoomCompleted(percent,finalize){isNaN(percent)&&(percent=ZOOM_DEFAULT),planZoomCurrentPercent=percent,uiUpdateAfterZoom(percent,finalize)}