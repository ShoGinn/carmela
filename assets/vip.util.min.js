window.VIP=window.VIP||{},window.VIP.Util=window.VIP.Util||{},window.VIP.Util.Main=(jQuery,{}),function(Namespace,$,undefined){Namespace.FnOverride=function(nameFnBase,oFnOverride){var _oOriginalModuleChain,_nameOriginalMethod,_oFnBaseOriginal,_oFnOverride,self={},_FQN="VIP.Util.FnOverride";self.isDisabled=undefined,self.callBase=function(oFnOverrideArguments){if(!0!==self.isDisabled)return _oFnBaseOriginal.apply(_oFnOverride,oFnOverrideArguments);dbg("WARNING! "+_FQN+".callBase(): override is disabled, call to base would have been duplicate")},self.disable=function(){_oOriginalModuleChain[_nameOriginalMethod]=_oFnBaseOriginal,self.isDisabled=!0},self.enable=function(){_init()};var _init=function(){for(var namespaces=nameFnBase.split("."),moduleChain=window,i=0;i<namespaces.length-1;i++){if("object"!=typeof moduleChain)return void dbg("ERROR! "+_FQN+".init(): base function or parent module(s) not found");moduleChain=moduleChain[namespaces[i]]}_nameOriginalMethod=namespaces[i],_oFnBaseOriginal=(_oOriginalModuleChain=moduleChain)[_nameOriginalMethod],_oOriginalModuleChain[_nameOriginalMethod]=oFnOverride,_oFnOverride=oFnOverride,self.isDisabled=!1};return _init(),self}}(window.VIP.Util,jQuery);var utilDbgIndent=void 0,utilDbgOutput="console",uiIsTouchUI=void 0,uiIsKiosk=void 0,uiKioskContainer=void 0;function dbgSetOutputToWindow(){if(1===DBG){utilDbgOutput="window";var $divDbg=$('<div id="divDbg1"></div>'),$btnDbg=$('<input type="button" id="btnDbg1Clear" value="Clear" data-role="none" />');$btnDbg.on("tap",(function(){$("#txtDbg1").val("")})),$divDbg.append($btnDbg),($btnDbg=$('<input type="button" id="btnDbg1FPHTML" value="divPlan HTML" data-role="none" />')).on("tap",(function(){dbg("--- divPlan.html():\n"+$("#divPlan").html())})),$divDbg.append($btnDbg);var $txtDbg=$('<br/><textarea id="txtDbg1" class="ui-scroll-container"></textarea>');$divDbg.append($txtDbg),$("#divStage").append($divDbg)}}function dbg(msg){if(1===DBG){var out="";if(void 0!==utilDbgIndent&&(out=utilDbgIndent,out+=new Array(utilDbgIndent+1).join("-"),out+=": "),out+=(new Date).toLocaleTimeString()+" ",out+=dbgGetObjectInfo(msg),"window"===utilDbgOutput){var $txtDbg=$("#txtDbg1");$txtDbg.val($txtDbg.val()+"\n"+out)}else console.debug(out)}}function dbgGetObjectInfo(obj){var out="";return"object"==typeof obj||"object Array"==typeof obj?(out+="length:"+obj.length+"\n",$.each(obj,(function(key,element){if(out+="\t"+key+": "+element,"object"==typeof element||"object Array"==typeof element){out+="\tobj-tostring: ";try{out+=xmlToString(element)}catch(err){try{out+=JSON.stringify(element)}catch(err){}}}out+="\n"}))):out+=obj,out}function dbgSetIndent(indent){indent?indent===parseInt(indent,10)&&(utilDbgIndent=indent):utilDbgIndent=void 0}function vip_gtag(eventName,eventCategory,eventLabel,eventData1,eventData2){eventName="vip_"+eventName,eventCategory=void 0===eventCategory?"":eventCategory,eventLabel=void 0===eventLabel?"":eventLabel,eventData1=void 0===eventData1?"":eventData1,eventData2=void 0===eventData2?"":eventData2,window.gtag&&window.gtag("event",eventName,{event_category:eventCategory,event_label:eventLabel,event_data1:eventData1,event_data2:eventData2})}function killEvent(e,stopImmediateAlso){return(e=e||window.event)&&(e.preventDefault(),e.stopPropagation(),!0===stopImmediateAlso&&e.stopImmediatePropagation()),!1}function touchGetEventPositions(e){var positions=[];if(e=e||window.event)if(e.touches)for(var tch,t=0,len=e.touches.length;t<len;t++)tch=e.touches[t],positions.push({x:tch.pageX,y:tch.pageY});else{var d=document,b=document.body;positions.push({x:e.pageX||e.clientX+(d&&d.scrollLeft||b&&b.scrollLeft||0)-(d&&d.clientLeft||b&&d.clientLeft||0),y:e.pageY||e.clientY+(d&&d.scrollTop||b&&b.scrollTop||0)-(d&&d.clientTop||b&&d.clientTop||0)})}return positions}function uiKioskGetContainer(){return void 0===uiKioskContainer&&(uiKioskContainer=!1,window.top&&!0===window.top.vipIsKioskRoot&&"function"==typeof window.top.postMessage?uiKioskContainer=window.top:window.parent&&!0===window.parent.vipIsKioskRoot&&"function"==typeof window.parent.postMessage?uiKioskContainer=window.parent:window.vipIsKioskRoot&&"function"==typeof window.postMessage&&(uiKioskContainer=window)),uiKioskContainer}function uiKioskPostMessage(msg){var kiosk=uiKioskGetContainer();kiosk&&void 0!==msg&&("string"!=typeof msg&&(msg=JSON.stringify(msg)),kiosk.postMessage(msg,"*"))}function isKiosk(){if(void 0===uiIsKiosk){var urlQS=$.deparam.querystring();uiIsKiosk=!(1!=urlQS.kiosk&&!uiKioskGetContainer())}return uiIsKiosk}function isTouchDevice(){if(void 0===uiIsTouchUI){var urlQS=$.deparam.querystring();uiIsTouchUI=1==urlQS.touch||Modernizr.ifptouchdevice}return uiIsTouchUI}function isTouchEvent(e){return void 0!==e&&void 0!==e.gesture&&"mouse"!==e.gesture.pointerType}function isSmallScreen(){var layoutWidth=strStripNonNumeric($("#divLayoutID").css("width")),layoutHeight=strStripNonNumeric($("#divLayoutID").css("height"));return layoutWidth&&layoutWidth>0&&layoutWidth<=430||layoutHeight&&layoutHeight>0&&layoutHeight<=430}function imgGetSrcRetina(src,force){if((void 0!==window.devicePixelRatio||window.devicePixelRatio<=0?window.devicePixelRatio:1)>1.3||!0===force){var srcRetina=src.replace(/(.+)(\.\w{3,4})$/,"$1@2x$2");-1===srcRetina.indexOf("@2x@2x")&&(src=srcRetina)}return src}function forceRedraw($element){if($element){var domElement=$element.get(0);if(domElement){var domEmptyNode=domElement.ownerDocument.createTextNode(" ");domElement.appendChild(domEmptyNode),setTimeout((function(){domElement.removeChild(domEmptyNode)}),1)}}}Modernizr&&(Modernizr.addTest("hires",(function(){return!!((window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI||1)>1)})),Modernizr.addTest("ifptouchdevice",(function(){var isWindows=-1!==(new UAParser).getOS().name.indexOf("Windows");return Modernizr.touchevents&&(Modernizr.hires||isWindows)}))),function($){$.fn.imgRetina=function(options){options||(options={});var $img,retinaSrc,src,w,h,settings=$.extend({retina_suffix:"@2x",new_base_src:void 0,retina_pixel_ratio:1.5,allow_resize:!1,resize_min_width:void 0,resize_min_height:void 0,fade_out_speed:1,fade_in_speed:1},options);return $(this).each((function(index,element){if($img=$(element),src=$img.attr("src"),settings.new_base_src&&(src=settings.new_base_src,$img.attr("src","")),$img&&$img.is("img")&&src){var loadRetina=function(){new RegExp("(.+)("+settings.retina_suffix+"\\.\\w{3,4})").test(src)?loadFinal():((w=$(element).attr("width"))||(w=$img.css("width")),w&&"100%"!=w||(w=$img.width()),w=parseFloat(w),(h=$(element).attr("height"))||(h=$img.css("height")),h&&"100%"!=h||(h=$img.height()),h=parseFloat(h),(void 0!==window.devicePixelRatio||window.devicePixelRatio<=0?window.devicePixelRatio:1)<=settings.retina_pixel_ratio&&!settings.allow_resize||settings.allow_resize&&w>=settings.resize_min_width&&h>=settings.resize_min_height?loadFinal():(retinaSrc=src.replace(/(.+)(\.\w{3,4})$/,"$1"+settings.retina_suffix+"$2"),$.ajax({url:retinaSrc,type:"HEAD",success:function(){$img.off("load",loadRetina),(!settings.allow_resize||w>=settings.resize_min_width&&h>=settings.resize_min_height)&&(w&&$img.attr("width",w),h&&$img.attr("height",h)),$img.on("load",loadFinal),$img.attr("src",retinaSrc)},error:function(){$img.off("load",loadRetina),loadFinal()}})))},loadFinal=function(){$img.off("load",loadFinal),$img.fadeTo(settings.fade_in_speed,1)};$img.fadeTo(settings.fade_out_speed,0,(function(){settings.new_base_src&&$img.attr("src",""),$img.on("load",loadRetina),$img.attr("src",src)}))}})),this}}(jQuery);var executeAfterFinal=function(){var timers={};return function(callback,ms,uniqueID){uniqueID||(uniqueID=Math.random()),timers[uniqueID]&&clearTimeout(timers[uniqueID]),timers[uniqueID]=setTimeout(callback,ms)}}();function strStripNonNumeric(str){return void 0===str?"":str=str.replace(/\D/g,"")}function strEscapeDots(str){return void 0===str?"":str=(str=str.replace(/\./g,"\\.")).replace(/\\\\/g,"\\")}function strFormatCurrency(numVal,iPrecision){return void 0===numVal&&(numVal=0),void 0===iPrecision&&(iPrecision=2),numVal="$"+(numVal=parseFloat(numVal)).toFixed(iPrecision).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function intToHex(iVal){return("0"+parseInt(iVal).toString(16)).slice(-2)}function htmlRGBToHex(strRGB){if((strRGB=strRGB.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))&&4===strRGB.length)return("#"+intToHex(strRGB[1])+intToHex(strRGB[2])+intToHex(strRGB[3])).toUpperCase()}function htmlEncode(str){return $("<div/>").text(str).html()}function htmlDecode(str){return $("<div/>").html(str).text()}function xmlToString(obj){return obj&&obj.length>0&&(obj=obj[0]),obj.xml?obj.xml:(new XMLSerializer).serializeToString(obj)}function cssGetPropertyValue(selector,property){var val=void 0,$tester=$("#divSVGToolbox");return selector&&selector.length>1&&(selector.substr(0,1),selector=selector.substr(1),$tester.attr("class",selector),val=$tester.css(property),$tester.attr("class","")),val}function svgGetBounds($node){var tmp,bounds={x:0,y:0,width:0,height:0,bbox_x:void 0,bbox_y:void 0,bbox_width:void 0,bbox_height:void 0,attr_x:void 0,attr_y:void 0,attr_width:void 0,attr_height:void 0,tf_x:void 0,tf_y:void 0,has_bbox:!1,has_attr:!1,has_tf:!1};try{var bbox=$node[0].getBBox();bounds.has_bbox=!0,bounds.bbox_x=bbox.x,bounds.bbox_y=bbox.y,bounds.bbox_width=bbox.width,bounds.bbox_height=bbox.height}catch(ex){dbg("ERROR! "+ex.message)}bounds.attr_x=$node.attr("x"),void 0!==bounds.attr_x&&(bounds.has_attr=!0,bounds.attr_x=parseFloat(bounds.attr_x)),bounds.attr_y=$node.attr("y"),void 0!==bounds.attr_y&&(bounds.has_attr=!0,bounds.attr_y=parseFloat(bounds.attr_y)),bounds.attr_width=$node.attr("width"),void 0!==bounds.attr_width&&(bounds.has_attr=!0,bounds.attr_width=parseFloat(bounds.attr_width)),bounds.attr_height=$node.attr("height"),void 0!==bounds.attr_height&&(bounds.has_attr=!0,bounds.attr_height=parseFloat(bounds.attr_height));var mx=xfrmSVGGet($node);return 0!==mx.e(1,3)&&(bounds.has_tf=!0,tmp=parseFloat(bounds.x),tmp=isNaN(tmp)?0:tmp,bounds.tf_x=mx.e(1,3)+tmp),0!==mx.e(2,3)&&(bounds.has_tf=!0,tmp=parseFloat(bounds.y),tmp=isNaN(tmp)?0:tmp,bounds.tf_y=mx.e(2,3)+tmp),bounds.x=bounds.attr_x?bounds.attr_x:0,bounds.x=bounds.tf_x?bounds.x+bounds.tf_x:bounds.x,bounds.y=bounds.attr_y?bounds.attr_y:0,bounds.y=bounds.tf_y?bounds.y+bounds.tf_y:bounds.y,bounds.width=bounds.attr_width?bounds.attr_width:bounds.bbox_width,bounds.width=bounds.width?bounds.width:0,bounds.height=bounds.attr_height?bounds.attr_height:bounds.bbox_height,bounds.height=bounds.height?bounds.height:0,bounds}function svgHighlight($node,colorSearch,colorChange){$node.is("[stroke="+colorSearch.toUpperCase()+"],[stroke="+colorSearch.toLowerCase()+"]")&&$node.attr("stroke",colorChange),$node.find("[stroke="+colorSearch.toUpperCase()+"],[stroke="+colorSearch.toLowerCase()+"]").attr("stroke",colorChange),($node.is("[fill="+colorSearch.toUpperCase()+"],[fill="+colorSearch.toLowerCase()+"]")||"#000000"===colorSearch&&void 0===$node.attr("fill"))&&$node.attr("fill",colorChange),$node.find("[fill="+colorSearch.toUpperCase()+"],[fill="+colorSearch.toLowerCase()+"]").attr("fill",colorChange)}function svgHighlightAnyStroke($node,colorChange,disableUndo){var $nodeToUpdate,prevStroke,prevFill;disableUndo=void 0!==disableUndo&&disableUndo,$node.find("[stroke],path,line,rect,polygon").each((function(){$nodeToUpdate=$(this),prevStroke=$nodeToUpdate.attr("stroke"),disableUndo||$nodeToUpdate.attr("data-prev-stroke",prevStroke),prevStroke&&$nodeToUpdate.attr("stroke",colorChange)})),$node.find('text,g[id^="TEXT"]').each((function(){$nodeToUpdate=$(this),prevStroke=$nodeToUpdate.attr("stroke"),prevFill=$nodeToUpdate.attr("fill"),disableUndo||($nodeToUpdate.attr("data-prev-stroke",prevStroke),$nodeToUpdate.attr("data-prev-fill",prevFill)),prevStroke&&$nodeToUpdate.attr("stroke",colorChange),$nodeToUpdate.attr("fill",colorChange)}))}function svgHighlightAnyStrokeUndo($node){var $nodeToUpdate;$node.find("[stroke],path,line,rect,polygon,text").each((function(){($nodeToUpdate=$(this)).attr("stroke",$nodeToUpdate.attr("data-prev-stroke")),$nodeToUpdate.attr("data-prev-stroke")})),$node.find("text").each((function(){($nodeToUpdate=$(this)).attr("fill",$nodeToUpdate.attr("data-prev-fill")),$nodeToUpdate.attr("data-prev-fill")}))}function xfrmCSSSet($cssElement,matrix3D,force2dCssNotation){var txt;!0===force2dCssNotation?(txt="matrix(",txt+=matrix3D.e(1,1)+",",txt+=matrix3D.e(2,1)+",",txt+=matrix3D.e(1,2)+",",txt+=matrix3D.e(2,2)+",",txt+=matrix3D.e(1,3)+",",txt+=matrix3D.e(2,3)+")"):(txt="matrix3d("+matrix3D.e(1,1)+","+matrix3D.e(2,1)+",0,0,",txt+=matrix3D.e(1,2)+","+matrix3D.e(2,2)+",0,0,",txt+="0,0,1,0,",txt+=matrix3D.e(1,3)+","+matrix3D.e(2,3)+",0,1)"),$cssElement.css("transform",txt)}function xfrmCSSGet($cssElement){var txt=$cssElement.css("transform"),vals=[];if(txt&&-1!=txt.indexOf("matrix3d(")){txt=(txt=txt.split("matrix3d("))[1].split(",");for(var i=0;i<txt.length;i++)vals[i]=parseFloat(strStripNonNumeric(txt[i]));return Matrix.create([[vals[0],0,vals[12]],[0,vals[5],vals[13]],[0,0,1]])}if(txt&&-1!=txt.indexOf("matrix(")){if((txt=txt.split(") ")).length>1){for(i=txt.length-1;i>=0;i--)if(-1!=txt[i].indexOf("matrix")){vals=txt[i];break}}else vals=txt[0];(vals=vals.split(","))[0]=vals[0].split("(")[1],vals[5]=vals[5].split(")")[0];for(i=0;i<6;i++)vals[i]=parseFloat(vals[i]);return Matrix.create([[vals[0],vals[2],vals[4]],[vals[1],vals[3],vals[5]],[0,0,1]])}return Matrix.create([[1,0,0],[0,1,0],[0,0,1]])}function xfrmSVGSet($svgElement,matrix3D){var txt="matrix(";txt+=matrix3D.e(1,1)+" ",txt+=matrix3D.e(2,1)+" ",txt+=matrix3D.e(1,2)+" ",txt+=matrix3D.e(2,2)+" ",txt+=matrix3D.e(1,3)+" ",txt+=matrix3D.e(2,3)+")",$svgElement.attr("transform",txt)}function xfrmSVGGet($svgElement){var vals=[1,0,0,1,0,0],txt=$svgElement.attr("transform");if(txt&&-1!=txt.indexOf("matrix")){if((txt=txt.split(") ")).length>1){for(i=txt.length-1;i>=0;i--)if(-1!=txt[i].indexOf("matrix")){vals=txt[i];break}}else vals=txt[0];(vals=vals.split(" "))[0]=vals[0].split("(")[1],vals[5]=vals[5].split(")")[0]}for(var i=0;i<6;i++)vals[i]=parseFloat(vals[i]);return Matrix.create([[vals[0],vals[2],vals[4]],[vals[1],vals[3],vals[5]],[0,0,1]])}function xfrmMatrixGetDefault(){return Matrix.I(3)}function xfrmMatrixToString(matrix3D){return matrix3D.inspect()}function xfrmMatrixIsMirroredX(matrix3D){return matrix3D.e(1,1)<0}function xfrmMatrixIsMirroredY(matrix3D){return matrix3D.e(2,2)<0}function xfrmMatrixSetElement(matrix3D,i,j,value){var elements=[[matrix3D.e(1,1),matrix3D.e(1,2),matrix3D.e(1,3)],[matrix3D.e(2,1),matrix3D.e(2,2),matrix3D.e(2,3)],[matrix3D.e(3,1),matrix3D.e(3,2),matrix3D.e(3,3)]];return elements[i-1][j-1]=value,Matrix.create(elements)}function xfrmMatrixMove(matrix3D,distanceX,distanceY){distanceX=distanceX?parseFloat(distanceX):0,distanceY=distanceY?parseFloat(distanceY):0;var mX=Matrix.create([[1,0,distanceX],[0,1,distanceY],[0,0,1]]);return matrix3D.multiply(mX)}function xfrmMatrixMoveAbsolute(matrix3D,positionX,positionY){return void 0!==positionX&&(matrix3D=xfrmMatrixSetElement(matrix3D,1,3,positionX=positionX?parseFloat(positionX):0)),void 0!==positionY&&(matrix3D=xfrmMatrixSetElement(matrix3D,2,3,positionY=positionY?parseFloat(positionY):0)),matrix3D}function xfrmMatrixScale(matrix3D,scaleX,scaleY){scaleX=scaleX?parseFloat(scaleX):0,scaleY=scaleY?parseFloat(scaleY):0;var mX=Matrix.Diagonal([scaleX,scaleY,1]);return matrix3D.multiply(mX)}function xfrmMatrixScaleAbsolute(matrix3D,scaleX,scaleY){return void 0!==scaleX&&(matrix3D=xfrmMatrixSetElement(matrix3D,1,1,scaleX=scaleX?parseFloat(scaleX):0)),void 0!==scaleY&&(matrix3D=xfrmMatrixSetElement(matrix3D,2,2,scaleY=scaleY?parseFloat(scaleY):0)),matrix3D}function xfrmMatrixMirror(matrix3D,doX,doY,width,height){var mx,flipX=!0===doX?-1:1,flipY=!0===doY?-1:1;mx=Matrix.Diagonal([flipX,flipY,1]),matrix3D=matrix3D.multiply(mx);var shiftX=doX&&width?-1*parseFloat(width):0,shiftY=doY&&height?-1*parseFloat(height):0;return mx=Matrix.create([[1,0,shiftX],[0,1,shiftY],[0,0,1]]),matrix3D=matrix3D.multiply(mx)}function xfrmMatrixMirrorAbsolute(matrix3D,xShouldBeMirrored,yShouldBeMirrored,width,height){var mx,flipX=1,flipY=1,shiftX=0,shiftY=0,currentScaleX=matrix3D.e(1,1),currentScaleY=matrix3D.e(2,2);return(!0===xShouldBeMirrored&&currentScaleX>0||!1===xShouldBeMirrored&&currentScaleX<0)&&(flipX=-1,shiftX=width?-1*parseFloat(width):0),(!0===yShouldBeMirrored&&currentScaleY>0||!1===yShouldBeMirrored&&currentScaleY<0)&&(flipY=-1,shiftY=height?-1*parseFloat(height):0),mx=Matrix.Diagonal([flipX,flipY,1]),matrix3D=matrix3D.multiply(mx),mx=Matrix.create([[1,0,shiftX],[0,1,shiftY],[0,0,1]]),matrix3D=matrix3D.multiply(mx)}function xfrmMatrixRotate(matrix3D,radians,centerPointX,centerPointY){radians=radians?parseFloat(radians):0,centerPointX=centerPointX?parseFloat(centerPointX):0,centerPointY=centerPointY?parseFloat(centerPointY):0;var mx=Matrix.create([[1,0,centerPointX],[0,1,centerPointY],[0,0,1]]);return matrix3D=matrix3D.multiply(mx),mx=Matrix.RotationZ(radians),matrix3D=matrix3D.multiply(mx),centerPointX*=-1,centerPointY*=-1,mx=Matrix.create([[1,0,centerPointX],[0,1,centerPointY],[0,0,1]]),matrix3D=matrix3D.multiply(mx)}function xfrmMatrixRotateAbsolute(matrix3D,radians,centerPointX,centerPointY){radians=radians?parseFloat(radians):0,centerPointX=centerPointX?parseFloat(centerPointX):0,centerPointY=centerPointY?parseFloat(centerPointY):0;var mx=Matrix.create([[1,0,centerPointX],[0,1,centerPointY],[0,0,1]]);return matrix3D=xfrmMatrixSetElement(matrix3D=matrix3D.multiply(mx),1,2,0),matrix3D=xfrmMatrixSetElement(matrix3D,2,1,0),mx=Matrix.RotationZ(radians),matrix3D=matrix3D.multiply(mx),centerPointX*=-1,centerPointY*=-1,mx=Matrix.create([[1,0,centerPointX],[0,1,centerPointY],[0,0,1]]),matrix3D=matrix3D.multiply(mx)}